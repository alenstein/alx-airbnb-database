# SQL Join Queries

This document provides a description of the SQL queries written in the `joins_queries.sql` file.

## Understanding the Queries

The `joins_queries.sql` file contains three SQL queries that use different types of JOINs to combine data from various tables in an Airbnb-like database.

### 1. Query 1: Bookings with User Details

* **What it does:** This query fetches a list of all bookings and includes the information of the user who made each booking.
* **Join Type Used:** `INNER JOIN`
* **Tables Involved:** `Bookings` and `Users`.
* **How it works:** It looks for matching `UserID` in both the `Bookings` and `Users` tables. Only bookings that have a corresponding user, and users who have made bookings, will be shown.

### 2. Query 2: Properties with Their Reviews

* **What it does:** This query lists all properties and any reviews they have received. Importantly, it will show all properties, even if a property has no reviews yet.
* **Join Type Used:** `LEFT JOIN`
* **Tables Involved:** `Properties`, `Reviews`, and (optionally) `Users` (to show who wrote the review).
* **How it works:** It takes everything from the `Properties` table and tries to match it with reviews from the `Reviews` table using `PropertyID`. If a property has reviews, the review details are shown. If a property has no reviews, its details are still listed, but the review fields will be empty (NULL).

### 3. Query 3: All Users and All Bookings

* **What it does:** This query gives a complete list of all users and all bookings, showing how they relate.
* **Join Type Used:** `FULL OUTER JOIN`
* **Tables Involved:** `Users` and `Bookings`.
* **How it works:**
    * It shows every user. If a user has made bookings, those booking details are listed next to the user. If a user hasn't made any bookings, their details are still shown, but the booking fields will be empty (NULL).
    * It also shows every booking. If a booking is linked to a user, that user's details are shown. If a booking isn't linked to any user (which is unusual but possible), the booking is still listed, but the user fields will be empty (NULL).


---

# SQL Subquery Queries

This section provides a description of the SQL queries written in the `subqueries.sql` file. These queries demonstrate the use of non-correlated and correlated subqueries.

## Understanding the Subqueries

The `subqueries.sql` file contains two SQL queries:

### 1. Query 1: Properties with High Average Rating

* **What it does:** This query finds all properties that have an average review rating greater than 4.0.
* **Type of Subquery Used:** Non-correlated Subquery (the inner query can be executed independently of the outer query).
* **Tables Involved:** `Properties` and `Reviews`.
* **How it works:**
    * An inner query first calculates the average `Rating` for each `PropertyID` from the `Reviews` table. It then filters these to get a list of `PropertyID`s where this average rating is greater than 4.0.
    * The outer query then selects the `PropertyID`, `PropertyName`, and `Location` from the `Properties` table for only those `PropertyID`s that are present in the list generated by the inner query.

### 2. Query 2: Users with Multiple Bookings

* **What it does:** This query identifies users who have made more than 3 bookings.
* **Type of Subquery Used:** Correlated Subquery (the inner query's execution depends on the outer query).
* **Tables Involved:** `Users` and `Bookings`.
* **How it works:**
    * The outer query iterates through each user in the `Users` table.
    * For each user being considered by the outer query, the inner (correlated) subquery is executed. This inner query counts the number of `BookingID`s in the `Bookings` table that match the `UserID` of the current user from the outer query.
    * The `WHERE` clause of the outer query then checks if this count (returned by the inner subquery for that specific user) is greater than 3. If it is, the `UserID`, `UserName`, and `Email` of that user are included in the final result set.

## Assumed Table Names (for all queries)

These queries assume your database has tables like:
* `Users` (with `UserID`, `UserName`, `Email`)
* `Bookings` (with `BookingID`, `UserID`, `PropertyID`, `BookingDate`)
* `Properties` (with `PropertyID`, `PropertyName`, `Location`)
* `Reviews` (with `ReviewID`, `PropertyID`, `UserID`, `Rating`)

